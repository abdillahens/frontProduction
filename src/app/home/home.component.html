<app-nav-bar-test></app-nav-bar-test>
<div class="all">
    <div class="modal fade m-0" id="addPhoto" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered mt-3 mb-0" role="document">
            <div class="modal-content">
                <div class="modal-body container text-center p-5 m-0">
                    <div class="div"><img id="myImage3"
                            [src]="clientsValue().picture ? clientsValue().picture :  profile " (click)="editPhoto()"
                            alt="client" class="rounded-circle profile" width="200" height="200"></div>
                    <br>
                    <h4>{{clientsValue().nom}} {{clientsValue().prenom}}</h4>
                    <p class="mt-3 mb-4">veuillez charger votre photo de profile</p>
                    <div class="mb-4">
                        <input class="file-input form-control" (change)="selectImg($event)" type="file"  accept="image/png, image/gif, image/jpeg"
                            #UploadFileInput />
                    </div>
                    <button class="btn submit mb-2" (click)="changePhoto()" [disabled]="charged"  >ajouter</button>
                    <h6 *ngIf="message" class="text-danger">{{message}}</h6>
                    <h4 *ngIf="uploaded" class="chargement">Chargement <span>.</span><span>.</span><span>.</span></h4>

                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->

    <div class="modal fade m-0" id="exampleModalCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered mt-3 mb-0" role="document">
            <div class="modal-content">
                <!-- <div class="modal-header text-white">
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div> -->

                <div class="modal-body container text-center p-5 m-0">
                    <div class="div"><img id="myImage2"
                            [src]="clientsValue().picture ? clientsValue().picture :  profile " (click)="editPhoto()"
                            alt="client" class="rounded-circle profile" width="200" height="200"></div>
                    <br>
                    <h4>{{clientsValue().nom }} {{clientsValue().prenom }}</h4>
                    <p class="mt-5 subject">Votre photo de profil aide les autres utilisateurs à vous reconnaître et
                        vous permet de savoir quand vous êtes connecté à votre compte</p>
                    <div class="row mt-5">
                        <div><button class="btn btn-primary submit" (click)="addPhoto()">modifier</button></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <body class="m-0">
        <br>
        <div class="container">
            <div class="main-body">
                <div class="row gutters-sm">
                    <div class="col-md-3 mb-1">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <img id="myImage1"
                                        [src]="clientsValue().picture ? clientsValue().picture :  profile "
                                        (click)="editPhoto()" alt="client" class="rounded-circle profile" width="200"
                                        height="200">
                                    <hr>

                                    <div class="">
                                        <h4>{{clientsValue().nom }} {{clientsValue().prenom }} </h4>
                                        <p class="text-secondary mb-1">{{clientsValue().profession }}</p>
                                        <p class="text-muted font-size-sm">{{clientsValue().niveauScolaire }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card mt-3"></div>
                    </div>
                    <div class="col-md-9">
                        <div class="card mb-3 ">
                            <div class="card-body">
                                <div class="menu">
                                    <nav class="navbar navbar-expand-lg navbar-light ">
                                        <button class="navbar-toggler bg-dark" type="button" data-toggle="collapse" data-target="#navbarSupported" aria-controls="navbarSupported" >
                                            <span class="navbar-toggler-icon"></span>
                                        </button>
                                        <div class="collapse navbar-collapse" id="navbarSupported" type="button"
                                            style="text-align: center;">
                                            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ">
                                                <li class="nav-item">
                                                    <a class="nav-link fw-bold ms-5" routerLinkActive="active"
                                                        [routerLink]="['/home']">Profile</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link fw-bold ms-5"
                                                        [routerLink]="['/client/test/depression']"
                                                        routerLinkActive="active">Enquête de dépression</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link fw-bold ms-5"
                                                        [routerLink]="['/client/test/anexity']"
                                                        routerLinkActive="active">Enquête d'anxiété</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link fw-bold ms-5"
                                                        [routerLink]="['/client/test/stress']"
                                                        routerLinkActive="active">Enquête de stress</a>
                                                </li>
                                            </ul>

                                        </div>
                                
                                    </nav>
                                    <hr>
                                    <hr class="hr">
                                </div>
                                <div class="container info-user text">
                                    <div class="row mb-2  ms-5">
                                        <div class="col-sm-3">
                                            <h6 class="mb-0">Nom</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{clientsValue().nom }}
                                        </div>
                                    </div>
                                    <div class="row mb-2  ms-5">
                                        <div class="col-sm-3">
                                            <h6 class="mb-0">Prenom</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{clientsValue().prenom }}
                                        </div>
                                    </div>

                                    <div class="row mb-2  ms-5">
                                        <div class="col-sm-3">
                                            <h6 class="mb-0">Email</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{clientsValue().email}}
                                        </div>
                                    </div>

                                    <div class="row mb-2  ms-5">
                                        <div class="col-sm-3">
                                            <h6 class="mb-0">Date de Naissance</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{clientsValue()?.date_naissance ?
                                            clientsValue().date_naissance.split('T')[0] : "null"}}
                                        </div>
                                    </div>

                                    <div class="row mb-2  ms-5">
                                        <div class="col-sm-3">
                                            <h6 class="mb-0">Telephonne</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{clientsValue()?.numero_tele}}
                                        </div>
                                    </div>
                                    <!-- <div class="row mb-2  ms-5">
                                        <div class="col-sm-3">
                                            <h6 class="mb-0">Adresse</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{clientsValue()?.adresse }}
                                        </div>
                                    </div> -->
                                    <div class="row mb-2  ms-5">
                                        <div class="col-sm-3">
                                            <h6 class="mb-0">Profession</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{clientsValue()?.profession }}
                                        </div>
                                    </div>

                                    <div class="row mb-2">
                                        <div class="col-sm-12 text-center">
                                            <a class="btn modifier" (click)="updateUser()">Modifier</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Body-->
    </body>
    <!-- Modal -->
    <div class="modal fade " id="elegantModalFormUpdate" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <!--Content-->
            <div class="modal-content form-elegant">
                <!--Header-->
                <div class="modal-header text-center">
                    <h3 class="modal-title w-100 dark-grey-text font-weight-bold my-3 ms-5" id="myModalLabel">
                        <strong>Modifier Votre Profile</strong>
                    </h3>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body mx-4">
                    <form [formGroup]="registerForm" (ngSubmit)="registreSubmit()">
                        <div class="row register-form">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" formControlName="nom" class="form-control validate"
                                        placeholder="Votre nom *"
                                        [ngClass]="{ 'is-invalid': submitted && f.nom.errors }" />
                                    <div *ngIf="submitted && f.nom.errors" class="invalid-feedback">
                                        <div *ngIf="f.nom.errors.required">Nom est obligatoire</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <input type="text" formControlName="prenom" placeholder="Votre Prenom *"
                                        class="form-control validate"
                                        [ngClass]="{ 'is-invalid': submitted && f.prenom.errors }" />
                                    <div *ngIf="submitted && f.prenom.errors" class="invalid-feedback">
                                        <div *ngIf="f.prenom.errors.required">Prenom est obligatoire</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="maxl">
                                        <select formControlName="sexe" class="form-control validate"
                                            [ngClass]="{ 'is-invalid': submitted && f.sexe.errors }"
                                            class="custom-select validate">
                                            <option value="" selected disabled>Votre sexe *</option>
                                            <option value="M">M</option>
                                            <option value="F">F</option>
                                        </select>
                                        <div *ngIf="submitted && f.sexe.errors" class="invalid-feedback">
                                            <div *ngIf="f.sexe.errors.required">Sexe est obligatoire</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <input placeholder="Date de naissance *" type="date"  formControlName="date_naissance"
                                        class="form-control validate"
                                        [ngClass]="{ 'is-invalid': submitted && f.date_naissance.errors }" />
                                    <div *ngIf="submitted && f.date_naissance.errors" class="invalid-feedback">
                                        <div *ngIf="f.date_naissance.errors.required">Date de naissance est obligatoire
                                        </div>
                                    </div>
                                </div>
                            
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" formControlName="email" placeholder="Votre email *"
                                        class="form-control validate"
                                        [ngClass]="{ 'is-invalid': submitted && f.email.errors }" readonly/>
                                    <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                                        <div *ngIf="f.email.errors.required">Email est obligatoire</div>
                                        <div *ngIf="f.email.errors.email">Email must be a valid email address</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <input type="text" placeholder="Votre numèro de téléphone *" formControlName="tele"
                                        class="form-control validate"
                                        [ngClass]="{ 'is-invalid': submitted && f.tele.errors }" />
                                    <div *ngIf="submitted && f.tele.errors" class="invalid-feedback">
                                        <div *ngIf="f.tele.errors.required">Numèro de téléphone est obligatoire</div>
                                        <div *ngIf="f.tele.errors.pattern">Numèro de téléphone invalide.</div>
                                    </div>
                                </div>
                                <!-- <div class="form-group">
                                    <input type="text" placeholder="Votre Adresse *" formControlName="adresse"
                                        class="form-control validate"
                                        [ngClass]="{ 'is-invalid': submitted && f.adresse.errors }" />
                                    <div *ngIf="submitted && f.adresse.errors" class="invalid-feedback">
                                        <div *ngIf="f.adresse.errors.required">Adresse est obligatoire</div>
                                    </div>
                                </div> -->
                                <div class="form-group" >
                                    <select formControlName="profession" class="form-control validate"
                                        [ngClass]="{ 'is-invalid': submitted && f.profession.errors }"
                                        class="custom-select validate" >
                                        <option value="" selected disabled>Votre profession *</option>
                                        <option value="Etudiant" disabled>Etudiant</option>
                                        <option value="Professeur" disabled>Professeur</option>
                                        <option value="Doctorant" disabled>Doctorant</option>
                                        <option value="autre" disabled>autre</option>
                                    </select>
                                    <div *ngIf="submitted && f.profession.errors" class="invalid-feedback">
                                        <div *ngIf="f.profession.errors.required">profession est obligatoire</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <select *ngIf="f.profession.value === 'Etudiant' " formControlName="niveauScolaire" class="form-control validate"
                                    [ngClass]="{ 'is-invalid': submitted && f.niveauScolaire.errors }"
                                    class="custom-select validate">
                                    <option value="" selected disabled>Votre niveau scolaire *</option>
                                    <option value="1 ère année preparatoire">1 ère année preparatoire</option>
                                    <option value="2 ème année preparatoire">2 ème année preparatoire</option>
                                    <option value="1 ère année cycle d'ingenieur">1 ère année cycle d'ingenieur
                                    </option>
                                    <option value="2 ème année cycle d'ingénieur">2 ème année cycle d'ingénieur
                                    </option>
                                    <option value="3 ème année cycle d'ingénieur">3 ème année cycle d'ingénieur
                                    </option>
                                </select>
                                    <div *ngIf="submitted && f?.niveauScolaire.errors" class="invalid-feedback">
                                        <div *ngIf="f?.niveauScolaire.errors.required">niveauScolaire est obligatoire</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="text-center mb-3 mt-3 me-auto">
                        <button type="button" (click)="registreSubmit()"
                            class="btn blue-gradient btn-block btn-rounded z-depth-1a inscrire">Enregistrer Les
                            Modifications</button>
                    </div>
                </div>
                <!--Footer-->
                <!-- <div class="modal-footer mx-5 pt-3 mb-1">
        <p class="font-small grey-text d-flex justify-content-end">vous n'etes pas un membre? <a href="#"
                class="blue-text ml-1">
                S'inscrire</a></p>
    </div> -->
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!-- Modal -->
  <!-- modal success updating  -->
    <div id="myModal" class="modal fade">
        <div class="modal-dialog modal-confirm">
            <div class="modal-content">
                <div class="modal-header justify-content-center">
                    <div class="icon-box">
                        <i class="far fa-check-circle"></i>
                    </div>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body text-center">
                    <h4>Parfait!</h4>	
                    <p>les Modifications sont bien enregistrés.</p>
                </div>
            </div>
        </div>
    </div>     